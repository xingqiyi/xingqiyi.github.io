<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Language" Content="en" />
    <meta charset="utf-8">

    <style>
        body {
            font-size: 1.5em;
        }
        
        p {
            word-break: break-all;
            /*word-wrap:break-word; */
        }
    </style>

</head>

<body>

    <h3>计算图片中形状的个数和面积:</h3>
    <p>个数:</p>
    <p id='number'></p>
    <p>面积:</p>
    <pre id='area'></pre>

    <canvas id='myCanvas'></canvas>

    <img id='image'></img>
    <script>
        document.getElementById('image');


        var canvas = document.getElementById('myCanvas');
        canvas.width = 600;
        canvas.height = 300;

        var ctx = canvas.getContext('2d');
        var img = new Image();

        img.src = '../images/veily_js_04.png'; //src也可以是从文件选择控件中取得。
        // img.crossOrigin = 'Anonymous'; 

        img.onload = function() {
            ctx.drawImage(img, 0, 0);
 

            var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            var uint8ClampedArray = imageData.data;
            console.log(uint8ClampedArray, uint8ClampedArray.toString());

            var binaryArray = simplify(uint8ClampedArray);
            
            for(var i =0;i<binaryArray.length;i++){

            }

        }


        function simplify(uint8ClampedArray){
            var binaryArray = [];
            for(var i = 0;i<uint8ClampedArray.length;i+=3){
                if(uint8ClampedArray[i]==255&&uint8ClampedArray[i+1]==255&&uint8ClampedArray[i+2]==255){
                    binaryArray.push(0);
                }
                else if(uint8ClampedArray[i]==0&&uint8ClampedArray[i+1]==0&&uint8ClampedArray[i+2]==0){
                    binaryArray.push(0);
                }
                else{
                    binaryArray.push(1);
                }
            }

            return binaryArray;

        }
    </script>


</body>

</html>